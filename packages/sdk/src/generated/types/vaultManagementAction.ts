/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  combineCodec,
  getAddressDecoder,
  getAddressEncoder,
  getDiscriminatedUnionDecoder,
  getDiscriminatedUnionEncoder,
  getStructDecoder,
  getStructEncoder,
  getU64Decoder,
  getU64Encoder,
  getU8Decoder,
  getU8Encoder,
  getUnitDecoder,
  getUnitEncoder,
  type Address,
  type Codec,
  type Decoder,
  type Encoder,
  type GetDiscriminatedUnionVariant,
  type GetDiscriminatedUnionVariantContent,
} from "@solana/kit";
import {
  getOracleConfigDecoder,
  getOracleConfigEncoder,
  getVaultStatusDecoder,
  getVaultStatusEncoder,
  type OracleConfig,
  type OracleConfigArgs,
  type VaultStatus,
  type VaultStatusArgs,
} from ".";

export type VaultManagementAction =
  | { __kind: "Disable" }
  | { __kind: "SetStatus"; status: VaultStatus }
  | { __kind: "UpdateOracle"; index: number; oracle: OracleConfig }
  | {
      __kind: "UpdatePeriodLimit";
      index: number;
      durationSeconds: bigint;
      maxMintAmount: bigint;
      maxRedeemAmount: bigint;
    }
  | { __kind: "ResetPeriodLimit"; index: number }
  | { __kind: "SetCustodian"; newCustodian: Address }
  | { __kind: "SetStalesnessThreshold"; stalesnessThreshold: bigint }
  | { __kind: "SetMinOraclePrice"; minOraclePriceUsd: bigint }
  | { __kind: "SetMaxOraclePrice"; maxOraclePriceUsd: bigint };

export type VaultManagementActionArgs =
  | { __kind: "Disable" }
  | { __kind: "SetStatus"; status: VaultStatusArgs }
  | { __kind: "UpdateOracle"; index: number; oracle: OracleConfigArgs }
  | {
      __kind: "UpdatePeriodLimit";
      index: number;
      durationSeconds: number | bigint;
      maxMintAmount: number | bigint;
      maxRedeemAmount: number | bigint;
    }
  | { __kind: "ResetPeriodLimit"; index: number }
  | { __kind: "SetCustodian"; newCustodian: Address }
  | { __kind: "SetStalesnessThreshold"; stalesnessThreshold: number | bigint }
  | { __kind: "SetMinOraclePrice"; minOraclePriceUsd: number | bigint }
  | { __kind: "SetMaxOraclePrice"; maxOraclePriceUsd: number | bigint };

export function getVaultManagementActionEncoder(): Encoder<VaultManagementActionArgs> {
  return getDiscriminatedUnionEncoder([
    ["Disable", getUnitEncoder()],
    ["SetStatus", getStructEncoder([["status", getVaultStatusEncoder()]])],
    [
      "UpdateOracle",
      getStructEncoder([
        ["index", getU8Encoder()],
        ["oracle", getOracleConfigEncoder()],
      ]),
    ],
    [
      "UpdatePeriodLimit",
      getStructEncoder([
        ["index", getU8Encoder()],
        ["durationSeconds", getU64Encoder()],
        ["maxMintAmount", getU64Encoder()],
        ["maxRedeemAmount", getU64Encoder()],
      ]),
    ],
    ["ResetPeriodLimit", getStructEncoder([["index", getU8Encoder()]])],
    ["SetCustodian", getStructEncoder([["newCustodian", getAddressEncoder()]])],
    [
      "SetStalesnessThreshold",
      getStructEncoder([["stalesnessThreshold", getU64Encoder()]]),
    ],
    [
      "SetMinOraclePrice",
      getStructEncoder([["minOraclePriceUsd", getU64Encoder()]]),
    ],
    [
      "SetMaxOraclePrice",
      getStructEncoder([["maxOraclePriceUsd", getU64Encoder()]]),
    ],
  ]);
}

export function getVaultManagementActionDecoder(): Decoder<VaultManagementAction> {
  return getDiscriminatedUnionDecoder([
    ["Disable", getUnitDecoder()],
    ["SetStatus", getStructDecoder([["status", getVaultStatusDecoder()]])],
    [
      "UpdateOracle",
      getStructDecoder([
        ["index", getU8Decoder()],
        ["oracle", getOracleConfigDecoder()],
      ]),
    ],
    [
      "UpdatePeriodLimit",
      getStructDecoder([
        ["index", getU8Decoder()],
        ["durationSeconds", getU64Decoder()],
        ["maxMintAmount", getU64Decoder()],
        ["maxRedeemAmount", getU64Decoder()],
      ]),
    ],
    ["ResetPeriodLimit", getStructDecoder([["index", getU8Decoder()]])],
    ["SetCustodian", getStructDecoder([["newCustodian", getAddressDecoder()]])],
    [
      "SetStalesnessThreshold",
      getStructDecoder([["stalesnessThreshold", getU64Decoder()]]),
    ],
    [
      "SetMinOraclePrice",
      getStructDecoder([["minOraclePriceUsd", getU64Decoder()]]),
    ],
    [
      "SetMaxOraclePrice",
      getStructDecoder([["maxOraclePriceUsd", getU64Decoder()]]),
    ],
  ]);
}

export function getVaultManagementActionCodec(): Codec<
  VaultManagementActionArgs,
  VaultManagementAction
> {
  return combineCodec(
    getVaultManagementActionEncoder(),
    getVaultManagementActionDecoder(),
  );
}

// Data Enum Helpers.
export function vaultManagementAction(
  kind: "Disable",
): GetDiscriminatedUnionVariant<VaultManagementActionArgs, "__kind", "Disable">;
export function vaultManagementAction(
  kind: "SetStatus",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "SetStatus"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "SetStatus"
>;
export function vaultManagementAction(
  kind: "UpdateOracle",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "UpdateOracle"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "UpdateOracle"
>;
export function vaultManagementAction(
  kind: "UpdatePeriodLimit",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "UpdatePeriodLimit"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "UpdatePeriodLimit"
>;
export function vaultManagementAction(
  kind: "ResetPeriodLimit",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "ResetPeriodLimit"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "ResetPeriodLimit"
>;
export function vaultManagementAction(
  kind: "SetCustodian",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "SetCustodian"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "SetCustodian"
>;
export function vaultManagementAction(
  kind: "SetStalesnessThreshold",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "SetStalesnessThreshold"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "SetStalesnessThreshold"
>;
export function vaultManagementAction(
  kind: "SetMinOraclePrice",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "SetMinOraclePrice"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "SetMinOraclePrice"
>;
export function vaultManagementAction(
  kind: "SetMaxOraclePrice",
  data: GetDiscriminatedUnionVariantContent<
    VaultManagementActionArgs,
    "__kind",
    "SetMaxOraclePrice"
  >,
): GetDiscriminatedUnionVariant<
  VaultManagementActionArgs,
  "__kind",
  "SetMaxOraclePrice"
>;
export function vaultManagementAction<
  K extends VaultManagementActionArgs["__kind"],
  Data,
>(kind: K, data?: Data) {
  return Array.isArray(data)
    ? { __kind: kind, fields: data }
    : { __kind: kind, ...(data ?? {}) };
}

export function isVaultManagementAction<
  K extends VaultManagementAction["__kind"],
>(
  kind: K,
  value: VaultManagementAction,
): value is VaultManagementAction & { __kind: K } {
  return value.__kind === kind;
}
